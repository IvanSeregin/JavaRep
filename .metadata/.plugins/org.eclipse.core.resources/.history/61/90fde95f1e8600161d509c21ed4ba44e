package application.view;

import application.model.CalculatorModel;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.control.*;
import javafx.scene.control.Alert.AlertType;

public class CalculatorController 
{
	CalculatorModel calcModel = new CalculatorModel();
	private boolean isOperBtnClick = false;

	@FXML
	private TextField numInput;
	@FXML
	private Label numLabel;

	
	
	@FXML
	private void onNumButtonClick(ActionEvent event)
	{
		NumButtonAction ba = NumButtonAction.valueOf(((Button) event.getSource()).idProperty().get());
		numInput.setText(numInput.getText() + ba.doAction());
	}
	
	@FXML
	private void onOperBtnClick(ActionEvent event)
	{
		try
		{
			calcModel.addOperand(Double.parseDouble(numInput.getText()));
			OperButtonAction ba = OperButtonAction.valueOf(((Button) event.getSource()).idProperty().get());
			numLabel.setText(numLabel.getText() + numInput.getText() + ba.getOperation());
			numInput.clear();
		}
		catch (Exception e)
		{
            Alert alert = new Alert(AlertType.ERROR);
            alert.setTitle("Error");
            alert.setHeaderText("Attention!");
            alert.setContentText("There is no number or a number format is incorrect");
            alert.showAndWait();
            numInput.clear();
		}
		
	}
	
	@FXML
	private void onCalculate(ActionEvent event)
	{
		numLabel.setText(calcModel.calculate());
	}
}
